var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function l(t){let e;return s(t,(t=>e=t))(),e}function i(t,e,n){t.$$.on_destroy.push(s(e,n))}function u(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function m(t){return document.createTextNode(t)}function h(){return m(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function v(t,e,n){t.classList[n?"add":"remove"](e)}let y;function k(t){y=t}function x(){if(!y)throw new Error("Function called outside component initialization");return y}function _(t){x().$$.on_mount.push(t)}function T(t){x().$$.on_destroy.push(t)}function w(){const t=x();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}const E=[],S=[],A=[],C=[],z=Promise.resolve();let I=!1;function L(t){A.push(t)}let N=!1;const P=new Set;function j(){if(!N){N=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];k(e),D(e.$$)}for(k(null),E.length=0;S.length;)S.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];P.has(e)||(P.add(e),e())}A.length=0}while(E.length);for(;C.length;)C.pop()();I=!1,N=!1,P.clear()}}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}const F=new Set;let O;function Y(t,e){t&&t.i&&(F.delete(t),t.i(e))}function G(t,e,n,o){if(t&&t.o){if(F.has(t))return;F.add(t),O.c.push((()=>{F.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function H(t){t&&t.c()}function q(t,n,c,s){const{fragment:l,on_mount:i,on_destroy:u,after_update:a}=t.$$;l&&l.m(n,c),s||L((()=>{const n=i.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]})),a.forEach(L)}function M(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function R(t,e){-1===t.$$.dirty[0]&&(E.push(t),I||(I=!0,z.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(e,r,c,s,l,i,u,a=[-1]){const f=y;k(e);const m=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(f?f.$$.context:[])),callbacks:n(),dirty:a,skip_bound:!1,root:r.target||f.$$.root};u&&u(m.root);let h=!1;if(m.ctx=c?c(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&l(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),h&&R(e,t)),n})):[],m.update(),h=!0,o(m.before_update),m.fragment=!!s&&s(m.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();r.intro&&Y(e.$$.fragment),q(e,r.target,r.anchor,r.customElement),j()}k(f)}class J{$destroy(){M(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const U=[];function K(t,e){return{subscribe:Q(t,e).subscribe}}function Q(e,n=t){let o;const r=new Set;function s(t){if(c(e,t)&&(e=t,o)){const t=!U.length;for(const t of r)t[1](),U.push(t,e);if(t){for(let t=0;t<U.length;t+=2)U[t][0](U[t+1]);U.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(c,l=t){const i=[c,l];return r.add(i),1===r.size&&(o=n(s)||t),c(e),()=>{r.delete(i),0===r.size&&(o(),o=null)}}}}function V(e,n,c){const l=!Array.isArray(e),i=l?[e]:e,u=n.length<2;return K(c,(e=>{let c=!1;const a=[];let d=0,f=t;const m=()=>{if(d)return;f();const o=n(l?a[0]:a,e);u?e(o):f=r(o)?o:t},h=i.map(((t,e)=>s(t,(t=>{a[e]=t,d&=~(1<<e),c&&m()}),(()=>{d|=1<<e}))));return c=!0,m(),function(){o(h),f()}}))}const W=Q(0),X=Q(null),Z=Q(""),tt=V(Z,(t=>t||"Anonymous")),et=V(X,(t=>null!=t?Math.max(l(et),t):null)),nt=K([],(t=>{const e=()=>{fetch("/leaderboard").then((t=>t.json())).then((e=>t(e)))};e();const n=setInterval(e,1e4);return t([{name:"anon",score:69,time:Date.now()}]),()=>clearInterval(n)}));function ot(e){let n,o,r,c,s,l,i,$,b,v,y,k=e[1].toFixed(2)+"";return{c(){n=f("div"),o=f("button"),r=m("Clicked: "),c=m(e[0]),s=h(),l=f("p"),i=m("You have "),$=m(k),b=m("s left")},m(t,d){a(t,n,d),u(n,o),u(o,r),u(o,c),u(n,s),u(n,l),u(l,i),u(l,$),u(l,b),v||(y=p(o,"click",e[3]),v=!0)},p(t,[e]){1&e&&g(c,t[0]),2&e&&k!==(k=t[1].toFixed(2)+"")&&g($,k)},i:t,o:t,d(t){t&&d(n),v=!1,y()}}}function rt(t,e,n){let{gameTime:o=5}=e;const r=w();let c,s,l=0,i=o;_((()=>s=setTimeout((()=>{r("finish",{amountClicked:l})}),1e3*o))),T((()=>clearTimeout(s))),_((()=>c=setInterval((()=>{n(1,i-=.01)}),10))),T((()=>clearInterval(c)));return t.$$set=t=>{"gameTime"in t&&n(2,o=t.gameTime)},[l,i,o,()=>n(0,l++,l)]}et.subscribe((t=>{if(null==t)return;const e={highscore:t,name:l(tt)};fetch("/highscore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}));class ct extends J{constructor(t){super(),B(this,t,rt,ot,c,{gameTime:2})}}function st(e){let n,o,r,c,s;return{c(){n=f("div"),o=f("button"),r=m("Play again"),o.disabled=e[0],$(o,"class","svelte-1de7ilt"),v(o,"clicked",e[1]),$(n,"class","svelte-1de7ilt")},m(t,l){a(t,n,l),u(n,o),u(o,r),c||(s=p(o,"click",e[4](e[3].PLAYING)),c=!0)},p(t,e){1&e&&(o.disabled=t[0]),2&e&&v(o,"clicked",t[1])},i:t,o:t,d(t){t&&d(n),c=!1,s()}}}function lt(e){let n,o;return n=new ct({}),n.$on("finish",e[6]),{c(){H(n.$$.fragment)},m(t,e){q(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){G(n.$$.fragment,t),o=!1},d(t){M(n,t)}}}function it(e){let n,o,r,c;return{c(){n=f("button"),o=m("Click to play"),n.disabled=e[0],$(n,"class","svelte-1de7ilt"),v(n,"clicked",e[1])},m(t,s){a(t,n,s),u(n,o),r||(c=p(n,"click",e[4](e[3].PLAYING)),r=!0)},p(t,e){1&e&&(n.disabled=t[0]),2&e&&v(n,"clicked",t[1])},i:t,o:t,d(t){t&&d(n),r=!1,c()}}}function ut(t){let e,n,r,c;const s=[it,lt,st],l=[];function i(t,e){return t[2]==t[3].START?0:t[2]==t[3].PLAYING?1:2}return n=i(t),r=l[n]=s[n](t),{c(){e=f("div"),r.c(),$(e,"class","svelte-1de7ilt")},m(t,o){a(t,e,o),l[n].m(e,null),c=!0},p(t,[c]){let u=n;n=i(t),n===u?l[n].p(t,c):(O={r:0,c:[],p:O},G(l[u],1,1,(()=>{l[u]=null})),O.r||o(O.c),O=O.p,r=l[n],r?r.p(t,c):(r=l[n]=s[n](t),r.c()),Y(r,1),r.m(e,null))},i(t){c||(Y(r),c=!0)},o(t){G(r),c=!1},d(t){t&&d(e),l[n].d()}}}function at(t,e,n){let o;i(t,W,(t=>n(2,o=t)));let{disabled:r=!1}=e,c=!1;const s={START:0,PLAYING:1,FINISHED:2};W.set(s.START);const l=t=>{X.set(t),n(0,r=!0),W.set(s.FINISHED),setTimeout((()=>n(0,r=!1)),1e3)};return t.$$set=t=>{"disabled"in t&&n(0,r=t.disabled)},[r,c,o,s,t=>()=>{c||(n(1,c=!0),setTimeout((()=>{n(1,c=!1),W.set(t)}),200))},l,t=>l(t.detail.amountClicked)]}class dt extends J{constructor(t){super(),B(this,t,at,ut,c,{disabled:0})}}function ft(t,e,n){const o=t.slice();return o[1]=e[n],o[3]=n,o}function mt(t){let e,n,o,r,c,s,l,i,p,b,v,y,k,x=t[3]+1+"",_=t[1].name+"",T=t[1].score+"",w=new Date(t[1].time).toLocaleString()+"";return{c(){e=f("tr"),n=f("td"),o=m(x),r=h(),c=f("td"),s=m(_),l=h(),i=f("td"),p=m(T),b=h(),v=f("td"),y=m(w),k=h(),$(n,"class","svelte-1fhdtrz"),$(c,"class","svelte-1fhdtrz"),$(i,"class","svelte-1fhdtrz"),$(v,"class","svelte-1fhdtrz")},m(t,d){a(t,e,d),u(e,n),u(n,o),u(e,r),u(e,c),u(c,s),u(e,l),u(e,i),u(i,p),u(e,b),u(e,v),u(v,y),u(e,k)},p(t,e){1&e&&_!==(_=t[1].name+"")&&g(s,_),1&e&&T!==(T=t[1].score+"")&&g(p,T),1&e&&w!==(w=new Date(t[1].time).toLocaleString()+"")&&g(y,w)},d(t){t&&d(e)}}}function ht(e){let n,o,r,c=e[0].slice(0,5),s=[];for(let t=0;t<c.length;t+=1)s[t]=mt(ft(e,c,t));return{c(){n=f("table"),o=f("tr"),o.innerHTML='<th class="svelte-1fhdtrz">Place</th> \n    <th class="svelte-1fhdtrz">Name</th> \n    <th class="svelte-1fhdtrz">Score</th> \n    <th class="svelte-1fhdtrz">Time</th>',r=h();for(let t=0;t<s.length;t+=1)s[t].c();$(n,"class","svelte-1fhdtrz")},m(t,e){a(t,n,e),u(n,o),u(n,r);for(let t=0;t<s.length;t+=1)s[t].m(n,null)},p(t,[e]){if(1&e){let o;for(c=t[0].slice(0,5),o=0;o<c.length;o+=1){const r=ft(t,c,o);s[o]?s[o].p(r,e):(s[o]=mt(r),s[o].c(),s[o].m(n,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=c.length}},i:t,o:t,d(t){t&&d(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(s,t)}}}function pt(t,e,n){let o;return i(t,nt,(t=>n(0,o=t))),[o]}class $t extends J{constructor(t){super(),B(this,t,pt,ht,c,{})}}function gt(t){let e,n,o,r,c,s,l,i,v,y,k,x,_,T,w,E,S,A,C,z,I,L,N,P,j,D,F,O=(t[2]??"n/a")+"",R=(t[3]??"n/a")+"";return I=new dt({props:{disabled:!t[1]}}),P=new $t({}),{c(){e=h(),n=f("main"),o=f("h1"),o.textContent="Speed Clicker",r=h(),c=f("div"),s=f("div"),l=f("div"),i=f("div"),v=f("label"),v.textContent="Username",y=h(),k=f("input"),x=h(),_=f("span"),T=m("Last score: "),w=m(O),E=h(),S=f("span"),A=m("Highscore: "),C=m(R),z=h(),H(I.$$.fragment),L=h(),N=f("div"),H(P.$$.fragment),document.title="Speed Clicker",$(v,"for","username"),$(k,"name","username"),$(k,"placeholder","Enter username..."),k.disabled=t[0],$(i,"class","username-input"),$(l,"class","info svelte-buykdq"),$(s,"class","col"),$(N,"class","col"),$(c,"class","two-col svelte-buykdq")},m(d,f){a(d,e,f),a(d,n,f),u(n,o),u(n,r),u(n,c),u(c,s),u(s,l),u(l,i),u(i,v),u(i,y),u(i,k),b(k,t[1]),u(l,x),u(l,_),u(_,T),u(_,w),u(l,E),u(l,S),u(S,A),u(S,C),u(s,z),q(I,s,null),u(c,L),u(c,N),q(P,N,null),j=!0,D||(F=p(k,"input",t[4]),D=!0)},p(t,[e]){(!j||1&e)&&(k.disabled=t[0]),2&e&&k.value!==t[1]&&b(k,t[1]),(!j||4&e)&&O!==(O=(t[2]??"n/a")+"")&&g(w,O),(!j||8&e)&&R!==(R=(t[3]??"n/a")+"")&&g(C,R);const n={};2&e&&(n.disabled=!t[1]),I.$set(n)},i(t){j||(Y(I.$$.fragment,t),Y(P.$$.fragment,t),j=!0)},o(t){G(I.$$.fragment,t),G(P.$$.fragment,t),j=!1},d(t){t&&d(e),t&&d(n),M(I),M(P),D=!1,F()}}}function bt(t,e,n){let o,r,c,s;return i(t,W,(t=>n(0,o=t))),i(t,Z,(t=>n(1,r=t))),i(t,X,(t=>n(2,c=t))),i(t,et,(t=>n(3,s=t))),[o,r,c,s,function(){r=this.value,Z.set(r)}]}const vt=new class extends J{constructor(t){super(),B(this,t,bt,gt,c,{})}}({target:document.body,props:{}});return"undefined"!=typeof module&&module.hot&&("undefined"!=typeof module&&module.hot.dispose((()=>{vt.$destroy()})),"undefined"!=typeof module&&module.hot.accept()),vt}();
//# sourceMappingURL=bundle.js.map
